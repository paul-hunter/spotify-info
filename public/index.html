<!DOCTYPE html>
<html>
    <head>
	<title>Spotify User Info</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<style type='text/css'>
	 #login, #loggedin {
             display: none;
	 }
	 .text-overflow {
             overflow: hidden;
             text-overflow: ellipsis;
             white-space: nowrap;
             width: 500px;
	 }
	</style>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js'></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
    </head>

    <body>
	<div class='container'>
	    <div id='login'>
		<h1>Login For User Info</h1>
		<a href='/login' class='btn btn-primary'>Login</a>
	    </div>
	    <div id='loggedin'>
		<br>
		<div class="dropdown">
		    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Tracks/Artists
			<span class="caret"></span></button>
		    <ul class="dropdown-menu">
			<li><a href="#" id='short-toggle'>Short term tracks (4 weeks)</a></li>
			<li><a href="#" id='medium-toggle'>Medium term tracks (6 months)</a></li>
			<li><a href="#" id='long-toggle'>Long term tracks (multiple years)</a></li>
			<li><a href="#" id='short-toggle-artists'>Short term artists (4 weeks)</a></li>
			<li><a href="#" id='medium-toggle-artists'>Medium term artists (6 months)</a></li>
			<li><a href="#" id='long-toggle-artists'>Long term artists (multiple years)</a></li>
		    </ul>
		</div>
		<div id='tracks'>
		    <div id='short-term'></div>
		    <div id='medium-term'></div>
		    <div id='long-term'></div>
		</div>
		<div id='artists'>
		    <div id='short-term-artists'></div>
		    <div id='medium-term-artists'></div>
		    <div id='long-term-artists'></div>
		</div>
		<div id='features'></div>
	    </div>
	</div>

	<script id='song-template' type='text/x-handlebars-template'>
	    <h1>Top {{total}} {{items.0.type}}s</h1>
	    <table class='table table-responsive table-hover'>
		<thead>
		    <tr>
 			<th>#</th>
			<th>Song</th>
			<th>Artist</th>
			<th>Album</th>
			<th>Popularity</th>
			<th>Release Date</th>
		    </tr>
		</thead>
		<tbody>
		    {{#each items}}
		    <tr>
			<td>{{item_num @index}}</td>
			<td>{{this.name}}</td>
			<td>{{this.artists.0.name}}</td>
			<td>{{this.album.name}}</td>
			<td>{{this.popularity}}</td>
			<td>{{this.album.release_date}}</td>
		    </tr>
		    {{/each}}
		</tbody>	    
	    </table>
	</script>
	
	<script id='artist-template' type='text/x-handlebars-template'>
	    <h1>Top {{total}} {{items.0.type}}s</h1>
	    <table class='table table-responsive table-hover'>
		<thead>
		    <tr>
 			<th>#</th>
			<th>Artist</th>
			<th>Popularity</th>
			<th>Followers</th>
		    </tr>
		</thead>
		<tbody>
		    {{#each items}}
		    <tr>
			<td>{{item_num @index}}</td>
			<td>{{this.name}}</td>
			<td>{{this.popularity}}</td>
			<td>{{followers_string}}</td>
		    </tr>
		    {{/each}}
		</tbody>	    
	    </table>
	</script>

	<script id='features-template' type='text/x-handlebars-template'>
	    <h2>Audio analysis</h2>
	    <dl class='dl-horizontal'>
		<dt>Valence</dt><dd>{{valence}}</dd>
		<dt>Danceability</dt><dd>{{danceability}}</dd>
		<dt>Energy</dt><dd>{{energy}}</dd>
		<dt>Instrumental Songs</dt><dd>{{instrumentals}}</dd>
	    </dl>
	</script>
	<script src='scripts/info.js'></script>
    </body>
</html>

