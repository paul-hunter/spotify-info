<!DOCTYPE html>
<html>
    <head>
	<title>Spotify User Info</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	      crossorigin="anonymous">
	<style type='text/css'>
	 #login, #loggedin {
             display: none;
	 }
	 .text-overflow {
             overflow: hidden;
             text-overflow: ellipsis;
             white-space: nowrap;
             width: 500px;
	 }
	</style>
    </head>

    <body>
	<div class='container'>
	    <div id='login'>
		<h1>Login For User Info</h1>
		<a href='/login' class='btn btn-primary'>Login</a>
	    </div>
	    <div id='loggedin'>
		<br>
		<div>
		    <button id='short-toggle'>Short term tracks (4 weeks)</button>
		    <button id='medium-toggle'>Medium term tracks (6 months)</button>
		    <button id='long-toggle'>Long term tracks (multiple years)</button>
		</div>
		<div>
		    <button id='short-toggle-artists'>Short term artists (4 weeks)</button>
		    <button id='medium-toggle-artists'>Medium term artists (6 months)</button>
		    <button id='long-toggle-artists'>Long term artists (multiple years)</button>
		</div>
		<div id='short-term'></div>
		<div id='medium-term'></div>
		<div id='long-term'></div>
		<div id='short-term-artists'></div>
		<div id='medium-term-artists'></div>
		<div id='long-term-artists'></div>
		<div id='features'></div>
		<div id='oauth'></div>
		<button class='btn btn-default' id='obtain-new-token'>Obtain new token using the refresh token</button>
	    </div>
	</div>

	<script id='song-template' type='text/x-handlebars-template'>
	    <h1>Top {{total}} {{items.0.type}}s</h1>
	    <div class='media'>
		<div class='pull-left'>
		    <img class='media-object' width='150' src='{{images.0.url}}'/>
		</div>
		<div class='media-body'>
		    <dl class='dl-horizontal'>
			<ol>
			    {{#each items}}
			    <li>{{this.name}} - {{this.artists.0.name}}</li>
			    {{/each}}
			</ol>
		    </dl>
		</div>
	    </div>
	</script>
	
	<script id='artist-template' type='text/x-handlebars-template'>
	    <h1>Top {{total}} {{items.0.type}}s</h1>
	    <div class='media'>
		<div class='pull-left'>
		    <img class='media-object' width='150' src='{{images.0.url}}'/>
		</div>
		<div class='media-body'>
		    <dl class='dl-horizontal'>
			<ol>
			    {{#each items}}
			    <li>{{this.name}}
				<ul>
				    <li>Followers: {{followers_string}}</li>
				    <li>Popularity: {{this.popularity}}</li>
				</ul>
			    </li>
			    {{/each}}
			</ol>
		    </dl>
		</div>
	    </div>
	</script>

	<script id='features-template' type='text/x-handlebars-template'>
	    <h2>Audio analysis</h2>
	    <dl class='dl-horizontal'>
		<dt>Valence</dt><dd>{{valence}}</dd>
		<dt>Danceability</dt><dd>{{danceability}}</dd>
		<dt>Energy</dt><dd>{{energy}}</dd>
		<dt>Instrumental Songs</dt><dd>{{instrumentals}}</dd>
	    </dl>
	</script>
	
	<script id='oauth-template' type='text/x-handlebars-template'>
	    <h3>oAuth info</h3>
	    <dl class='dl-horizontal'>
		<dt>Access token</dt><dd class='text-overflow'>{{access_token}}</dd>
		<dt>Refresh token</dt><dd class='text-overflow'>{{refresh_token}}</dd>
	    </dl>
	</script>

	<script src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js'></script>
	<script src='https://code.jquery.com/jquery-3.3.1.min.js'</script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js'></script>
	<script src='scripts/info.js'></script>
    </body>
</html>

