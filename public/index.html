<!DOCTYPE html>
<html>
    <head>
	<title>Spotify User Info</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	      crossorigin="anonymous">
	<style type='text/css'>
	 #login, #loggedin {
             display: none;
	 }
	 .text-overflow {
             overflow: hidden;
             text-overflow: ellipsis;
             white-space: nowrap;
             width: 500px;
	 }
	</style>
    </head>

    <body>
	<div class='container'>
	    <div id='login'>
		<h1>This is an example of the Authorization Code flow</h1>
		<a href='/login' class='btn btn-primary'>Log in with Spotify</a>
	    </div>
	    <div id='loggedin'>
		<div id='user-profile'>
		</div>
		<div id='features'>
		</div>
		<div id='oauth'>
		</div>
		<button class='btn btn-default' id='obtain-new-token'>Obtain new token using the refresh token</button>
	    </div>
	</div>

	<script id='user-profile-template' type='text/x-handlebars-template'>
	    <h1>Top Artists and Songs</h1>
	    <div class='media'>
		<div class='pull-left'>
		    <img class='media-object' width='150' src='{{images.0.url}}' />
		</div>
		<div class='media-body'>
		    <dl class='dl-horizontal'>
			<dt>top tracks - long term</dt>
			<br>
			<ol>
			    {{#each items}}
			    <li>{{this.name}} - {{this.artists.0.name}}</li>
			    {{/each}}
			</ol>
		    </dl>
		</div>
	    </div>
	</script>

	<script id='features-template' type='text/x-handlebars-template'>
	    <h2>Audio analysis</h2>
	    <dl class='dl-horizontal'>
		<dt>Valence</dt><dd>{{valence}}</dd>
		<dt>Danceability</dt><dd>{{danceability}}</dd>
		<dt>Energy</dt><dd>{{energy}}</dd>
		<dt>Instrumental Songs</dt><dd>{{instrumentals}}</dd>
	    </dl>
	</script>
	
	<script id='oauth-template' type='text/x-handlebars-template'>
	    <h3>oAuth info</h3>
	    <dl class='dl-horizontal'>
		<dt>Access token</dt><dd class='text-overflow'>{{access_token}}</dd>
		<dt>Refresh token</dt><dd class='text-overflow'>{{refresh_token}}</dd>
	    </dl>
	</script>

	<script src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js'></script>
	<script src='https://code.jquery.com/jquery-3.3.1.min.js'
		integrity='sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8='
		crossorigin='anonymous'></script>

	<script src='scripts/info.js'></script>
    </body>
</html>

